<!DOCTYPE html>
<html lang="es">
<head>
	<!-- Metadata -->
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="canonical" href="#" />
	<link rel="icon" type="img/png" href="img/favicon.png">
    <title>JavaScript</title>
    <meta name="description" content="Está es una página de ejemplos de Js">
    <meta name="keywords" content="HTML5, CSS3, Javascript">
    <meta name="author" content="Candy González">
	<!-- Incluye Js dentro del Archivo HTML-->
    <script type="text/javascript">	
        /* NOTA: Ver primero el archivo 12_Cookie.js */			
		function setCookie(nombre,valor,duracion) {
            /* Crea la cookie */	
            var d = new Date();
            d.setTime(d.getTime() + (duracion*24*60*60*1000));      //Para establecer el tiempo deduración de la cookie
            var expira = "expira=" + d.toGMTString();               // Crea la cadena con la duración
            document.cookie = nombre + "=" + valor + ";" + expira + ";path=/";  //Crea la Cookie
        }

        function getCookie(nombre) {
            /* Lee la cookie */	
            var name = nombre + "=";                                  // Crea una variable (name) con el texto a buscar
            var decodedCookie = decodeURIComponent(document.cookie);  // Decodifica la cadena de cookies para manejar cookies con caracteres especiales  
            var ca = decodedCookie.split(';');                        // Crea un arreglo separando la cookie cada ;
            for(var i = 0; i < ca.length; i++) {                      // Recorre el arreglo 
                var c = ca[i];                                        // Lee cada valor guardandolo en c 
                while (c.charAt(0) == ' ') {                          // Salta los espacios en blanco
                    c = c.substring(1);                               // Devuelve la cadena a partir de la posición 1
                }
                if (c.indexOf(name) == 0) {                           // Encuentra el nombre d la cookie
                    return c.substring(name.length, c.length);        // Devuelve el valor de la cookie
                }
            }
            return "";
        }

        function checkCookie() {
            /* Si la cookie está configurada, mostrará un saludo. Si no está configurada pedirá el nombre*/
            var user=getCookie("username");             // Llama a la función getCookie
            if (user != "") {                           // si no esta vacía saluda
                alert("Bienvenido otra vez " + user);   
            } else {                                    // si está vacía pide el nombre
                user = prompt("Dime tu nombre:","");    
                if (user != "" && user != null) {
                setCookie("username", user, 30);        // llama a la función que crea la cookie
                }
            }
        }
	</script>
	<noscript>Lo siento, su navegador no soporta JavaScript!</noscript>
</head>

<body onload="checkCookie()"></body>

</html>